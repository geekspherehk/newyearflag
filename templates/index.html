{% extends "base.html" %}

{% block content %}
<div class="hero">
    <h1>ğŸ¯ æ¬¢è¿ä½¿ç”¨å¹´åº¦Flagç®¡ç†å·¥å…·</h1>
    <p class="subtitle">ç®¡ç†ä½ çš„æ–°å¹´ç›®æ ‡ï¼Œå®ç°ä½ çš„æ¢¦æƒ³</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-value">{{ stats.total }}</div>
        <div class="stat-label">æ€»Flagæ•°</div>
    </div>
    <div class="stat-card completed">
        <div class="stat-icon">âœ…</div>
        <div class="stat-value">{{ stats.completed }}</div>
        <div class="stat-label">å·²å®Œæˆ</div>
    </div>
    <div class="stat-card in-progress">
        <div class="stat-icon">ğŸ”„</div>
        <div class="stat-value">{{ stats.in_progress }}</div>
        <div class="stat-label">è¿›è¡Œä¸­</div>
    </div>
    <div class="stat-card not-started">
        <div class="stat-icon">â³</div>
        <div class="stat-value">{{ stats.not_started }}</div>
        <div class="stat-label">æœªå¼€å§‹</div>
    </div>
</div>

<div class="progress-section">
    <h2>ğŸ“ˆ å®Œæˆç‡</h2>
    <div class="progress-bar-container">
        <div class="progress-bar" style="width: {{ stats.completion_rate }}%">
            <span class="progress-text">{{ "%.1f"|format(stats.completion_rate) }}%</span>
        </div>
    </div>
</div>

<div class="info-grid">
    <div class="info-card">
        <h3>ğŸ¯ å¹³å‡å¯è¡Œæ€§è¯„åˆ†</h3>
        <p class="info-value">{{ "%.1f"|format(stats.avg_feasibility) }}/100</p>
    </div>
    <div class="info-card">
        <h3>ğŸ”” å¾…æ£€æŸ¥Flag</h3>
        <p class="info-value">{{ reminder_count }} ä¸ª</p>
        {% if reminder_count > 0 %}
        <a href="/reminders" class="btn btn-warning">æŸ¥çœ‹æé†’</a>
        {% endif %}
    </div>
</div>

<div class="quick-actions">
    <h2>ğŸš€ å¿«é€Ÿæ“ä½œ</h2>
    <div class="action-buttons">
        <a href="/add" class="btn btn-primary">æ·»åŠ æ–°Flag</a>
        <a href="/flags" class="btn btn-secondary">æŸ¥çœ‹æ‰€æœ‰Flag</a>
        <a href="/reminders" class="btn btn-warning">æŸ¥çœ‹æé†’</a>
        <a href="/statistics" class="btn btn-info">æŸ¥çœ‹ç»Ÿè®¡</a>
    </div>
</div>

<div class="recent-flags">
    <h2>ğŸ“‹ æœ€è¿‘æ·»åŠ çš„Flag</h2>
    <div class="flag-list">
        {% for flag in flags[:5] %}
        <div class="flag-card">
            <div class="flag-header">
                <h3>{{ flag.title }}</h3>
                <span class="flag-status status-{{ flag.status }}">{{ flag.status }}</span>
            </div>
            <p class="flag-description">{{ flag.description[:100] }}...</p>
            <div class="flag-meta">
                <span>ğŸ“… {{ flag.target_date }}</span>
                <span>ğŸ“Š {{ flag.progress }}%</span>
                <span>ğŸ¯ {{ flag.feasibility_score }}/100</span>
            </div>
            <a href="/flag/{{ flag.id }}" class="btn btn-sm btn-outline">æŸ¥çœ‹è¯¦æƒ…</a>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}