{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <h1>ğŸ“Š ç»Ÿè®¡ä¿¡æ¯</h1>
    <a href="/" class="btn btn-secondary">è¿”å›é¦–é¡µ</a>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ğŸ“Š</div>
        <div class="stat-value">{{ stats.total }}</div>
        <div class="stat-label">æ€»Flagæ•°</div>
    </div>
    <div class="stat-card completed">
        <div class="stat-icon">âœ…</div>
        <div class="stat-value">{{ stats.completed }}</div>
        <div class="stat-label">å·²å®Œæˆ</div>
    </div>
    <div class="stat-card in-progress">
        <div class="stat-icon">ğŸ”„</div>
        <div class="stat-value">{{ stats.in_progress }}</div>
        <div class="stat-label">è¿›è¡Œä¸­</div>
    </div>
    <div class="stat-card not-started">
        <div class="stat-icon">â³</div>
        <div class="stat-value">{{ stats.not_started }}</div>
        <div class="stat-label">æœªå¼€å§‹</div>
    </div>
</div>

<div class="progress-section">
    <h2>ğŸ“ˆ æ€»ä½“å®Œæˆç‡</h2>
    <div class="progress-bar-container large">
        <div class="progress-bar" style="width: {{ stats.completion_rate }}%">
            <span class="progress-text">{{ "%.1f"|format(stats.completion_rate) }}%</span>
        </div>
    </div>
    {% if stats.completion_rate < 30 %}
    <p class="progress-warning">âš ï¸ å®Œæˆç‡è¾ƒä½ï¼Œå»ºè®®é‡æ–°å®¡è§†ç›®æ ‡çš„å¯è¡Œæ€§</p>
    {% elif stats.completion_rate > 80 %}
    <p class="progress-success">ğŸŒŸ å¤ªæ£’äº†ï¼ä½ çš„ç›®æ ‡å®Œæˆç‡å¾ˆé«˜ï¼</p>
    {% endif %}
</div>

<div class="info-grid">
    <div class="info-card">
        <h3>ğŸ¯ å¹³å‡å¯è¡Œæ€§è¯„åˆ†</h3>
        <p class="info-value large">{{ "%.1f"|format(stats.avg_feasibility) }}/100</p>
        <p class="info-description">
            {% if stats.avg_feasibility >= 80 %}
                ç›®æ ‡è®¾å®šéå¸¸åˆç†ï¼
            {% elif stats.avg_feasibility >= 60 %}
                ç›®æ ‡è®¾å®šåŸºæœ¬åˆç†ï¼Œå¯ä»¥ç»§ç»­ä¼˜åŒ–
            {% else %}
                å»ºè®®é‡æ–°å®¡è§†ç›®æ ‡è®¾å®šçš„åˆç†æ€§
            {% endif %}
        </p>
    </div>
</div>

{% if category_stats %}
<div class="category-stats">
    <h2>ğŸ“‹ åˆ†ç±»ç»Ÿè®¡</h2>
    <div class="category-grid">
        {% for category, data in category_stats.items() %}
        <div class="category-card">
            <h3>{{ category }}</h3>
            <div class="category-stats-detail">
                <div class="category-stat">
                    <span class="category-label">æ€»æ•°:</span>
                    <span class="category-value">{{ data.total }}</span>
                </div>
                <div class="category-stat">
                    <span class="category-label">å·²å®Œæˆ:</span>
                    <span class="category-value">{{ data.completed }}</span>
                </div>
                <div class="category-stat">
                    <span class="category-label">å®Œæˆç‡:</span>
                    <span class="category-value">
                        {% if data.total > 0 %}
                            {{ "%.1f"|format((data.completed / data.total * 100)) }}%
                        {% else %}
                            0%
                        {% endif %}
                    </span>
                </div>
            </div>
            <div class="category-progress">
                <div class="progress-bar-container small">
                    <div class="progress-bar" style="width: {% if data.total > 0 %}{{ (data.completed / data.total * 100) }}{% else %}0{% endif %}%"></div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}

<div class="tips-section">
    <h2>ğŸ’¡ æé«˜å®Œæˆç‡çš„å»ºè®®</h2>
    <div class="tips-grid">
        <div class="tip-card">
            <h3>ğŸ¯ è®¾å®šåˆç†ç›®æ ‡</h3>
            <p>å‚è€ƒå¯è¡Œæ€§è¯„ä¼°ç»“æœï¼Œè®¾å®šæ—¢æœ‰æŒ‘æˆ˜æ€§åˆå¯å®ç°çš„ç›®æ ‡</p>
        </div>
        <div class="tip-card">
            <h3>ğŸ“… å®šæœŸæ£€æŸ¥</h3>
            <p>æ¯æœˆè‡³å°‘æ›´æ–°ä¸€æ¬¡è¿›åº¦ï¼ŒåŠæ—¶å‘ç°å’Œè§£å†³é—®é¢˜</p>
        </div>
        <div class="tip-card">
            <h3>ğŸ“ å…·ä½“æè¿°</h3>
            <p>è¯¦ç»†æè¿°è¡ŒåŠ¨è®¡åˆ’ï¼ŒåŒ…å«å…·ä½“çš„æ­¥éª¤å’Œé‡åŒ–æŒ‡æ ‡</p>
        </div>
        <div class="tip-card">
            <h3>âš¡ åŠæ—¶è°ƒæ•´</h3>
            <p>æ ¹æ®å®é™…æƒ…å†µåŠæ—¶è°ƒæ•´ç›®æ ‡æˆ–æ–¹æ³•ï¼Œä¿æŒçµæ´»æ€§</p>
        </div>
    </div>
</div>

<div class="quick-actions">
    <h2>ğŸš€ å¿«é€Ÿæ“ä½œ</h2>
    <div class="action-buttons">
        <a href="/add" class="btn btn-primary">æ·»åŠ æ–°Flag</a>
        <a href="/flags" class="btn btn-secondary">æŸ¥çœ‹æ‰€æœ‰Flag</a>
        <a href="/reminders" class="btn btn-warning">æŸ¥çœ‹æé†’</a>
    </div>
</div>
{% endblock %}